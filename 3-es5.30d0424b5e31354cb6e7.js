(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{O3bw:function(t,n,e){"use strict";e.r(n);var i=e("CcnG"),a=function(){return function(){}}(),l=e("pMnS"),o=e("mrSG"),s=function(t){return t.SQUARE="square",t.ROUND="round",t.POLYGON="polygon",t}({}),r=e("Ni3L"),u=e.n(r),c=function(){function t(){}return t.prototype.getDistance=function(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},t.ngInjectableDef=i.Ob({factory:function(){return new t},token:t,providedIn:"root"}),t}(),h=function(){function t(t,n){this.elRef=t,this.touchS=n,this.preview=new i.m,this.scale=1,this.lastDist=0}return t.prototype.ngOnInit=function(){var t=this,n=this;this.stage=new u.a.Stage({draggable:!0,dragBoundFunc:function(t){var e,i,a,l;return n.scale>1?(a=(e=o.__read(n.countPosition(t),2))[0],l=e[1]):(a=(i=o.__read([this.absolutePosition().x,this.absolutePosition().y],2))[0],l=i[1]),console.log(a,l),{x:a,y:l}},scale:{x:this.scale,y:this.scale},width:window.innerWidth,height:window.innerHeight,container:"table-map"}),this.mapLayer=new u.a.Layer,this.stage.add(this.mapLayer),this.tablesLayer=new u.a.Layer,this.stage.add(this.tablesLayer);var e=new Image;e.src="./assets/resto.jpg",e.onload=function(){var n=Math.min(t.stage.width()/e.width,t.stage.height()/e.height);t.mapScale=n,t.stage.width(e.width*n),t.stage.height(e.height*n);var i=new u.a.Image({image:e,x:(t.stage.width()-e.width*n)/2,y:(t.stage.height()-e.height*n)/2,width:e.width*n,height:e.height*n});t.mapLayer.add(i),t.mapLayer.draw(),t.drawTables()},this.stage.getContent().addEventListener("touchmove",function(n){var e=n.touches[0],i=n.touches[1];if(e&&i){var a=t.touchS.getDistance({x:e.clientX,y:e.clientY},{x:i.clientX,y:i.clientY});t.lastDist||(t.lastDist=a),t.scale=t.stage.scaleX()*a/t.lastDist,t.scale=t.scale<1?1:t.scale>4?4:t.scale,t.stage.scale({x:t.scale,y:t.scale}),t.stage.draw(),t.lastDist=a}},!1),this.stage.getContent().addEventListener("touchend",function(){t.lastDist=0},!1),this.tablesLayer.on("click tap",function(n){t.preview.emit(t.tables.find(function(t){return t.id.toString()===n.target.name()}))})},t.prototype.countPosition=function(t){return[t.x>0?0:Math.abs(t.x)>this.stage.width()*this.scale-this.stage.width()?-(this.stage.width()*this.scale-this.stage.width()):t.x,t.y>0?0:Math.abs(t.y)>this.stage.height()*this.scale-this.stage.height()?-(this.stage.height()*this.scale-this.stage.height()):t.y]},t.prototype.drawTables=function(){var t=this;this.tables.forEach(function(n){var e;console.log(n),n.type===s.SQUARE||n.type===s.POLYGON?e=new u.a.Rect({x:n.position.x*t.mapScale,y:n.position.y*t.mapScale,width:n.position.width*t.mapScale,height:n.position.height*t.mapScale,strokeWidth:1,stroke:"#000",fill:"rgba(0,0,0,0.2)",name:n.id.toString(),rotation:n.position.rotate}):n.type===s.ROUND&&(e=new u.a.Circle({x:n.position.x*t.mapScale,y:n.position.y*t.mapScale,strokeWidth:1,stroke:"#000",fill:"rgba(0,0,0,0.2)",name:n.id.toString(),radius:n.position.width/2*t.mapScale})),e&&(t.tablesLayer.add(e),t.tablesLayer.draw())})},t}(),p=i.rb({encapsulation:0,styles:[[""]],data:{}});function b(t){return i.Kb(0,[(t()(),i.tb(0,0,null,null,0,"div",[["id","table-map"]],null,null,null,null,null))],null,null)}var g=e("Ip0R"),d=e("26FU"),f=[{id:1,title:"VIP 21",number:22,count:2,gallery:[],position:{x:350,y:93,width:27,height:60,rotate:90},type:s.POLYGON},{id:2,title:"VIP 22",number:22,count:2,gallery:[],position:{x:320,y:290,width:30,height:60,rotate:0},type:s.SQUARE},{id:3,title:"VIP 23",number:22,count:2,gallery:[],position:{x:875,y:370,width:90,height:100,rotate:90},type:s.ROUND}],w=function(){function t(t){this.table=t}return t.prototype.ngOnInit=function(){},t}(),y=function(){function t(t){this._matDialog=t,this.tables$=new d.a([])}return t.prototype.ngOnInit=function(){this.tables$.next(f)},t.prototype.onPreview=function(t){this._matDialog.open(w,{data:t})},t}(),m=e("o3x0"),v=i.rb({encapsulation:0,styles:[[""]],data:{}});function C(t){return i.Kb(0,[(t()(),i.tb(0,0,null,null,2,"app-client-map",[],null,[[null,"preview"]],function(t,n,e){var i=!0;return"preview"===n&&(i=!1!==t.component.onPreview(e)&&i),i},b,p)),i.sb(1,114688,null,0,h,[i.k,c],{tables:[0,"tables"]},{preview:"preview"}),i.Eb(131072,g.b,[i.h])],function(t,n){var e=n.component;t(n,1,0,i.Jb(n,1,0,i.Db(n,2).transform(e.tables$)))},null)}function x(t){return i.Kb(0,[(t()(),i.tb(0,0,null,null,1,"app-client-plan",[],null,null,null,C,v)),i.sb(1,114688,null,0,y,[m.e],null,null)],function(t,n){t(n,1,0)},null)}var S=i.pb("app-client-plan",y,x,{},{},[]),D=e("t68o"),L=i.rb({encapsulation:0,styles:[[""]],data:{}});function O(t){return i.Kb(0,[(t()(),i.tb(0,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),i.Ib(1,null,["",""])),i.Eb(0,g.f,[])],null,function(t,n){var e=n.component;t(n,1,0,i.Jb(n,1,0,i.Db(n,2).transform(e.table)))})}function P(t){return i.Kb(0,[(t()(),i.tb(0,0,null,null,1,"app-popup-table-info",[],null,null,null,O,L)),i.sb(1,114688,null,0,w,[m.a],null,null)],function(t,n){t(n,1,0)},null)}var k=i.pb("app-popup-table-info",w,P,{},{},[]),I=e("eDkP"),R=e("Fzqc"),q=e("ZYCi"),E=function(){return function(){}}(),M=e("4c35"),N=e("dWZg"),j=e("qAlS"),U=e("Wf4p"),Y=e("ZYjt");e.d(n,"ClientPlanModuleNgFactory",function(){return _});var _=i.qb(a,[],function(t){return i.Bb([i.Cb(512,i.j,i.bb,[[8,[l.a,S,D.a,k]],[3,i.j],i.x]),i.Cb(4608,g.k,g.j,[i.u,[2,g.r]]),i.Cb(4608,I.a,I.a,[I.g,I.c,i.j,I.f,I.d,i.q,i.z,g.d,R.b,[2,g.h]]),i.Cb(5120,I.h,I.i,[I.a]),i.Cb(5120,m.c,m.d,[I.a]),i.Cb(135680,m.e,m.e,[I.a,i.q,[2,g.h],[2,m.b],m.c,[3,m.e],I.c]),i.Cb(1073742336,g.c,g.c,[]),i.Cb(1073742336,q.l,q.l,[[2,q.q],[2,q.k]]),i.Cb(1073742336,E,E,[]),i.Cb(1073742336,R.a,R.a,[]),i.Cb(1073742336,M.f,M.f,[]),i.Cb(1073742336,N.b,N.b,[]),i.Cb(1073742336,j.b,j.b,[]),i.Cb(1073742336,I.e,I.e,[]),i.Cb(1073742336,U.b,U.b,[[2,U.a],[2,Y.f]]),i.Cb(1073742336,m.h,m.h,[]),i.Cb(1073742336,a,a,[]),i.Cb(1024,q.i,function(){return[[{path:"",component:y}]]},[])])})}}]);